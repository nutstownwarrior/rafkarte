<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="styles.css">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin=""/>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-teal.min.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
		<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
        <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
        integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin=""></script>
        <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>RAF Karte</title>
	</head>
    <body onclick="openFullscreen()">
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
            <header class="mdl-layout__header">
                <div class="mdl-layout__header-row">
                    <span class="mdl-layout-title">RAF Karte</span>
                    <div class="mdl-layout-spacer"></div>
                </div>
            </header>
            <div class="mdl-layout__drawer">
                <span class="mdl-layout-title">Navigation</span>
                <nav class="mdl-navigation">
                    <a class="mdl-navigation__link" href="Sonstige/Entstehung%20der%20RAF/origin.html">Entstehung der RAF</a>
                    <a class="mdl-navigation__link" href="Sonstige/Organisation%20und%20Struktur/structure.html">Organisation und Struktur</a>
                    <a class="mdl-navigation__link" href="Sonstige/Beurteilung/assessment.html">Beurteilung</a>
                    <a class="mdl-navigation__link" href="Sonstige/Ausblick/outlook.html">Ausblick</a>
                    <a class="mdl-navigation__link" href="Sonstige/Benutzte Tools/tools.html">Impressum</a>
                </nav>
            </div>
            <main class="mdl-layout__content">
                <div class="page-content">
                    <div class="mdl-grid">
                        <!-- Karten card -->
                        <div class="mdl-cell mdl-cell--12-col">
                            <div id="map" class="mdl-card mdl-shadow--4dp"></div>
                        </div>
                        <!-- Slider card -->
                        <div class="mdl-cell mdl-cell--12-col">
                            <div id="slider_card" class="mdl-card mdl-shadow--4dp mdl-grid">
                                <div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-phone wrapper">
                                    <button onclick="markerButton()" class=" mdl-button--colored mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" id="marker_button">Alle Marker</button>
                                </div>
                                <div class="mdl-cell mdl-cell--8-col mdl-cell--4-col-phone wrapper">
                                    <label for="date_slider" id="date">Datum</label>
                                    <input class="mdl-slider mdl-js-slider" type="range" min="1" max="365" value="0" tabindex="0" id="date_slider">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </body>
</html>
<script>
var mymap = L.map('map').setView([51.3061635, 9.4847365], 6);
var slider = document.getElementById("date_slider");
var date_display = document.getElementById("date");
//Marker Icons
var redIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-red.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
var blackIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-black.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
var greenIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-green.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
var greyIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-grey.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
var orangeIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-orange.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
var violetIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-violet.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
var yellowIcon = new L.Icon({
	iconUrl: 'Sonstige/Bilder/Marker/marker-icon-2x-yellow.png',
	shadowUrl: 'Sonstige/Bilder/Marker/marker-shadow.png',
	iconSize: [25, 41],
	iconAnchor: [12, 41],
	popupAnchor: [1, -34],
	shadowSize: [41, 41]
});
//Marker
var markers = [
	{day: 248 , label: "Schleyer Entführung", marker: L.marker([50.941278, 6.958281], {icon: redIcon}).bindPopup("<h5>5.September 1977</h5><p>Entführung Hanns Martin Schleyer</p><a href='Artikel/Entführung Hanns Martin Schleyer/Dokument1.html'>Mehr erfahren</a>").openPopup()},
    {day: 291 , label: "Stammheim", marker: L.marker([48.849 ,9.156]).bindPopup("<h5>18.Oktober 1977</h5><p>Todesnacht von Stammheim</p><a href='Artikel/Todesnacht von Stammheim/Dokument2.html'>Mehr erfahren</a>").openPopup()},
    {day: 10 , label: "Stammheim", marker: L.marker([48.848 ,9.157]).bindPopup("<h5>Test1</h5>").openPopup()},
    {day: 100 , label: "Stammheim", marker: L.marker([48.847 ,9.158]).bindPopup("<h5>Test2</h5>").openPopup()},
    {day: 200 , label: "Stammheim", marker: L.marker([48.846 ,9.159]).bindPopup("<h5>Test3</h5>").openPopup()},
]
var day_date = 0;
var allMarkers = L.markerClusterGroup();
var elem = document.documentElement;
L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
	minZoom: 5,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoibnV0c3Rvd253YXJyaW9yIiwiYSI6ImNqcmhneHc2eTJ2YjI0M3BnZzJwaGNicmoifQ.kVZC63yORhts2ATl08ksbg'
}).addTo(mymap);
//var markerCluster = L.markerClusterGroup();
    
mymap.addLayer(allMarkers);
for(var i = 0; i < markers.length ; i++){
		markers[i].marker.addTo(allMarkers);
	}
allMarkers.clearLayers();
    
slider.oninput = function() {
	var date = new Date(1977, 0, slider.value);
	date_display.innerHTML = date.toLocaleDateString();
	day_date = slider.value;
	showMarkers();
}

function markerButton(){ 	
	date_display.innerHTML = "Datum";
	slider.MaterialSlider.change("0");
	day_date = 365;
	showMarkers();
}

function showMarkers(){
	allMarkers.clearLayers();
	for(var i = 0; i < markers.length ; i++){
		if(markers[i].day <= day_date){
			markers[i].marker.addTo(allMarkers);
		}
	}
}

function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.mozRequestFullScreen) { /* Firefox */
    elem.mozRequestFullScreen();
  } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE/Edge */
    elem.msRequestFullscreen();
  }
}
</script>
